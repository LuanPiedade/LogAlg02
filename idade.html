<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Idade Temporal</title>
    <style>
        * {
            font-family: monospace;
        }
    </style>
</head>

<body>

    <h2>Atividade 1.2</h2>
    <p>Crie os scripts necessários para fazer a calculadora abaixo funcionar.</p>
    <ul>
        <li>O usuário digita ou seleciona a data de nascimento;</li>
        <li>O usuário clica em [Calcular idade];</li>
        <li>A idade em anos aparece em "Idade:".</li>
        <ul>
            <li>A idade deve levar em consideração o mês e o dia de nascimento também!</li>
        </ul>
    </ul>
    <p style="color:red">Observe que a data de nascimento (campo id="birth") retorna no formado AAAA-MM-DD.</p>

    <table>
        <tr>
            <td>Nascimento:</td>
            <td><input type="date" id="birth"></td>
        </tr>
        <tr>
            <td colspan="2">
                <button id="calc">Calcular idade</button>
            </td>
        </tr>
        <tr>
            <td>Idade:</td>
            <td><input type="number" id="yold"></td>
        </tr>
    </table>

    <script>
        // Inicia o cálculo da idade ao clicar no botão.
        calc.onclick = function () {

            // DEBUG: saída do campo 'id="birth"'
            console.log(birth.value)
            function idade (ano_aniversario, mes_aniversario, dia_aniversario){
                var d = new Date,
                ano_atual = d.getFullYear(),
                mes_atual = d.getMonth() + 1,
                dia_atual = d.getDate(),

                ano_aniversario = +ano_aniversario,
                mes_aniversario = +mes_aniversario,
                dia_aniversario = +dia_aniversario,

                quantos_anos = ano_atual - ano_aniversario;

                if (mes_atual < mes_aniversario|| mes_atual== mes_aniversario && dia_atual< dia_aniversario){
                    quantos_anos--;
                }
                return quantos_anos< 0 ? 0 :
                quantos_anos;

            }

            console.log (idade(1980, 12, 11)); //33

        }
    </script>

</body>

</html>